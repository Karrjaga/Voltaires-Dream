namespace = vn_ire_kingdom

#High King Succession
country_event = {
	id = vn_ire_kingdom.1
	title = "vn_ire_kingdom.1.t"
	desc = "vn_ire_kingdom.1.d"
	picture = DEATH_OF_HEIR_eventPicture

	is_triggered_only = yes
	trigger = {
		NOT = { any_country = { is_in_war = { casus_belli = cb_take_high_kingship } } }
		any_country = {
			NOT = { tag = ROOT }
			is_subject = no
			has_regency = no
			is_female = no
			has_reform = tribal_kingdom
			any_owned_province = { superregion = irish_superregion }
			OR = {
				primary_culture = dalcassian
				primary_culture = eoganachta
				primary_culture = laigin
				primary_culture = erainn
				primary_culture = ulaidh
				primary_culture = connachta
				primary_culture = gallowglass
			}
		}
	}
	mean_time_to_happen = { days = 1 }
	
	option = {
		name = "vn_ire_kingdom.1.a"
		custom_tooltip = vn_ire_kingdom.1.tt
		hidden_effect = {
			every_country = {
				limit = {
					NOT = { tag = ROOT }
					is_subject = no
					has_regency = no
					is_female = no
					has_reform = tribal_kingdom
					any_owned_province = { superregion = irish_superregion }
					OR = {
						primary_culture = dalcassian
						primary_culture = eoganachta
						primary_culture = laigin
						primary_culture = erainn
						primary_culture = ulaidh
						primary_culture = connachta
						primary_culture = gallowglass
					}
				}
				country_event = { id = vn_ire_kingdom.2 days = 5 }
			}
		}
	}
}

country_event = {
	id = vn_ire_kingdom.2
	title = "vn_ire_kingdom.2.t"
	desc = "vn_ire_kingdom.2.d"
	picture = ASSASSINATION_eventPicture
	goto = ire_capital

	is_triggered_only = yes
	mean_time_to_happen = { days = 1 }

	immediate = {
		hidden_effect = {
			FROM = {
				save_event_target_as = ire_capital
			}
		}
	}
	
	option = {
		name = "vn_ire_kingdom.2.a"
		ai_chance = {
			factor = 10
            modifier = {
            	factor = 10
            	OR = {
            		is_enemy = FROM
            		is_rival = FROM
            		historical_rival_with = FROM
            		dynasty = "Ó Néill"
            	}
            }
            modifier = {
                factor = 10
                OR = {
                	FROM = { has_regency = yes }
                	FROM = { is_female = yes }
                }
            }
            modifier = {
                factor = 2
                military_strength = {
                    who = FROM
                    value = 1.5
                }
            }
            modifier = {
                factor = 0
                OR = {
                	is_at_war = yes
                	is_bankrupt = yes
                	alliance_with = FROM
                	historical_friend_with = FROM
                }
            }
		}
		if = {
			limit = {
				NOT = { 
					has_casus_belli = {
						type = cb_take_high_kingship
						target = FROM
					}
				}
	
			}
			add_casus_belli = {
				target = FROM
				type = cb_take_high_kingship
			}
		}
		reverse_add_opinion = {
			who = FROM
			modifier = opinion_displeased
		}
	}
	option = {
		name = "vn_ire_kingdom.2.b"
		ai_chance = {
            factor = 90
            modifier = {
                factor = 1.5
                FROM = { num_of_allies = 4 }
            }
            modifier = {
                factor = 1.5
                NOT = {
                	military_strength = {
                    	who = FROM
                   		value = 0.8
                	}
                }
            }
        }
		if = {
			limit = {
				has_casus_belli = {
					type = cb_take_high_kingship
					target = FROM
				}
			}
			remove_casus_belli = {
				type = cb_take_high_kingship
				target = FROM
			}
		}
        reverse_add_opinion = {
			who = FROM
			modifier = opinion_pleased
		}
	}
}

country_event = {
    id = vn_ire_kingdom.3
	title = "vn_ire_kingdom.3.t"
	desc = "vn_ire_kingdom.3.d"
    picture = GOOD_WITH_MONARCH_eventPicture

    major = yes
	major_trigger = {
		OR = {
			capital_scope = {
				superregion = irish_superregion
			}
			has_reform = tribal_kingdom
		}
	}
    is_triggered_only = yes
    mean_time_to_happen = { days = 1 }

    option = {
        name = "vn_ire_kingdom.3.a"
        add_prestige = 25
		FROM = { add_prestige = -25 }
		tooltip = {
			add_country_modifier = {
				name = irish_high_king
				duration = -1
			}
		}
    }
}

country_event = {
    id = vn_ire_kingdom.4
	title = "vn_ire_kingdom.4.t"
	desc = "vn_ire_kingdom.4.d"
    picture = BAD_WITH_MONARCH_eventPicture

    trigger = {
        has_country_modifier = irish_high_king
        OR = {
        	exists = IRE
        	is_subject = yes
        	NOT = { has_reform = tribal_kingdom }
        	NOT = { any_owned_province = { superregion = irish_superregion } }
        	NOT = {
        		OR = {
        			primary_culture = dalcassian
					primary_culture = eoganachta
					primary_culture = laigin
					primary_culture = erainn
					primary_culture = ulaidh
					primary_culture = connachta
					primary_culture = gallowglass
        		}
        	}
        }
    }
    mean_time_to_happen = { days = 1 }
    immediate = { hidden_effect = { remove_country_modifier = irish_high_king } }

    option = {
        name = "vn_ire_kingdom.4.a"
        add_prestige = -5
    }
}

country_event = {
	id = vn_ire_kingdom.8
	title = "vn_ire_kingdom.8.t"
	desc = "vn_ire_kingdom.8.d"
	picture = COURT_eventPicture

	is_triggered_only = yes
	mean_time_to_happen =  { days = 1 }

	option = {
		name = "vn_ire_kingdom.8.a"
		tooltip = {
			white_peace = FROM
			add_truce_with = FROM
			FROM = { add_truce_with = ROOT }
		}
		random_country = {
			limit = { has_country_modifier = irish_high_king }
			reverse_add_opinion = {
				who = ROOT
				modifier = hrema60_opinion
			}
		}
	}
}