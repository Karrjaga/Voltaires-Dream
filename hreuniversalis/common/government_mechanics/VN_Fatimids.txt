fatimid_irreverence_mechanic = {
	alert_icon_gfx = GFX_alerticons_government_mechanics
	alert_icon_index = 12
	available = { }

	powers = {
		fatimid_irreverence = {
			gui = ottoman_decadende_gov_mech
			max = 100
			reset_on_new_ruler = no
			base_monthly_growth = 0
			is_good = no
			
			scaled_modifier = {
				modifier = {
					liberty_desire_from_subject_development = 1
					legitimacy = -1
					global_missionary_strength = -0.05
					religious_unity = -1
					land_morale = -0.25
					all_estate_loyalty_equilibrium = -0.2
					reform_progress_growth = -1
				}
			}
		}
	}
}

fatimid_viziers_vs_caliph_mechanic = {
		available = { }

	powers = {
		caliphal_authority = {
			gui = utraquists_vs_taborites_gov_mech
			max = 100	#caliph direction
			min = -100	#vizirate direction
			base_monthly_growth = 0
			scaled_modifier = {
				trigger = {
					has_government_power = { 
						mechanic_type = fatimid_viziers_vs_caliph_mechanic
						power_type = caliphal_authority
						value = 0
					}
				}
				modifier = {
					all_estate_loyalty_equilibrium = 0.1
					global_autonomy = -0.1
					stability_cost_modifier = 1
				}
			}
			reverse_scaled_modifier = {
				trigger = {
					NOT = {
						has_government_power = { 
							mechanic_type = fatimid_viziers_vs_caliph_mechanic
							power_type = caliphal_authority
							value = 0
						}
					}
				}
				modifier = {
					advisor_cost = -0.2
					global_unrest = 5
					global_autonomy = 0.1
				}
			}
			on_max_reached = {
				custom_tooltip = fatimid_viziers_vs_caliph_mechanic_at
				hidden_effect = {
					remove_government_reform = fatimid_caliphate_reform
					add_government_reform = feudal_theocracy
				}
				country_event = {
					id = vn_flavor_ftm.3 #Ayyubid Coup
				}
			}
			on_min_reached = {
				country_event = {
					id = vn_flavor_ftm.2 #Ayyubid Coup
				}
			}
		}
	}
}

fatimid_vizierate_mechanic = {
	alert_icon_gfx = GFX_alerticons_government_mechanics
	alert_icon_index = 17
	available = { }

	powers = {
		vizierate_power = {
			max = 100
			gui = council_of_ten_gov_mech
			show_before_interactions = yes
			reset_on_new_ruler = no
			base_monthly_growth = 0.05
			development_scaled_monthly_growth = 0
			scaled_modifier = {
				modifier = {
					stability_cost_modifier = 0.5
					advisor_cost = 0.2
					min_autonomy = 20
				}
			}
			scaled_modifier = {
				modifier = { 
					can_not_declare_war = yes
				}
				start_value = 90
				end_value = 100
			}
			scaled_modifier = {
				modifier = { 
					monthly_vizierate_power = -0.5
				}
				start_value = 50
				end_value = 100
			}
			reverse_scaled_modifier = {
				modifier = {
					monthly_vizierate_power = 0.5
				}
				start_value = 0
				end_value = 50
			}
			on_max_reached = {
				if = {
					limit = {
						is_or_was_tag = { tag = FTM }
					}
					country_event = {
						id = vn_flavor_ftm.2 #Ayyubid Coup
					}
				}
			}
			is_good = no
		}
	}
}
